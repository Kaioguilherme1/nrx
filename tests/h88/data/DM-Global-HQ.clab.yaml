name: DM-Global-HQ
topology:
    nodes:
        graphite:
            kind: linux
            image: netreplica/graphite:latest
            env:
                HOST_CONNECTION: ${SSH_CONNECTION}
            binds:
                - __clabDir__/topology-data.json:/htdocs/default/default.json:ro
                - __clabDir__/ansible-inventory.yml:/htdocs/lab/default/ansible-inventory.yml:ro
            ports:
                - 8080:80
            exec:
                - sh -c 'graphite_motd.sh 8080'
            labels:
                graph-hide: yes

        HQ-IT-Staging-Switch:
            kind: linux
            image: netreplica/ubuntu-host:latest
            cmd: /start.sh -sS
            exec:
                - bash -c "echo root:root | chpasswd"
            labels:
                graph-icon: access-switch
                graph-level: 9
                role: Access Switch
                group: DM-Global-HQ
                platform: Cisco IOS-XE
                vendor: Cisco
                model: C9200-48P
        HQ-IT-Staging-DistSw:
            kind: nokia_srlinux
            type: ixrd2
            image: ghcr.io/nokia/srlinux:latest
            labels:
                graph-icon: distribution-switch
                graph-level: 8
                role: Distribution Switch
                group: DM-Global-HQ
                platform: Nokia SR-Linux
                vendor: Nokia
                model: 7220 IXR-D2
        HQ-IT-Staging-Switch2:
            kind: ceos
            image: ceos:latest
            binds:
                - HQ-IT-Staging-Switch2_interface_map.json:/mnt/flash/EosIntfMapping.json:ro
            labels:
                graph-icon: access-switch
                graph-level: 9
                role: Access Switch
                group: DM-Global-HQ
                platform: Arista EOS
                vendor: Arista
                model: DCS-7010T-48
    links:
        - endpoints: ["HQ-IT-Staging-Switch:eth1", "HQ-IT-Staging-DistSw:e1-1"]
        - endpoints: ["HQ-IT-Staging-Switch:eth2", "HQ-IT-Staging-DistSw:e1-2"]
        - endpoints: ["HQ-IT-Staging-Switch2:eth1", "HQ-IT-Staging-DistSw:e1-3"]
        - endpoints: ["HQ-IT-Staging-Switch2:eth2", "HQ-IT-Staging-DistSw:e1-4"]
